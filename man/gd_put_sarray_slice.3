.\" gd_put_sarray_slice.3.  The gd_put_sarray_slice man page.
.\"
.\" Copyright (C) 2010, 2011, 2012, 2016 D. V. Wiebe
.\"
.\""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
.\"
.\" This file is part of the GetData project.
.\"
.\" Permission is granted to copy, distribute and/or modify this document
.\" under the terms of the GNU Free Documentation License, Version 1.2 or
.\" any later version published by the Free Software Foundation; with no
.\" Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
.\" Texts.  A copy of the license is included in the `COPYING.DOC' file
.\" as part of this distribution.
.\"
.TH gd_put_sarray_slice 3 "22 November 2016" "Version 0.10.0" "GETDATA"
.SH NAME
gd_put_sarray, gd_put_sarray_slice \(em write STRING or SARRAY data to a dirfile database
.SH SYNOPSIS
.B #include <getdata.h>
.HP
.nh
.ad l
.BI "int gd_put_sarray_slice(DIRFILE *" dirfile ", const char *" field_code ,
.BI "unsigned int " start ", size_t " len ", const char **" data_in );
.HP
.BI "int gd_put_sarray(DIRFILE *" dirfile ", const char *" field_code ,
.BI "const char *" data_in );
.hy
.ad n
.SH DESCRIPTION
The
.BR gd_put_sarray_slice ()
function writes string data to a dirfile(5) database specified by
.I dirfile
into the
.B STRING
or
.B SARRAY
scalar array
.IR field_code .
The location of the first element of the field into which data is stored is
given by
.IR start ,
and the number of elements stored is given by
.IR len .

If
.I field_code
specifies a
.B STRING
field, it is treated as if it were a
.B SARRAY
field of length one.

The
.BR gd_put_sarray ()
function behaves similarly, except the whole scalar array is written, as if
.BR gd_put_sarray_slice ()
were called with
.I start
equal zero and
.I len
equal to the value returned by
.BR gd_array_len (3).

The argument
.I data_in
must point to an array of pointers to character strings, which are the
values to store.  The number of elements which will be stored by
.BR gd_put_sarray ()
may be obtained by calling
.BR gd_array_len (3).
Unlike
.BR gd_putdata (3),
writing data past the end of the field is not permitted.  To add data to a
.BR SARRAY ,
first increase its length by calling
.BR gd_alter_sarray (3),
or another equivalent function.

The
.BR gd_put_string (3)
function provides another way of writing data to a
.B STRING
field.

.SH RETURN VALUE
On success,
.BR gd_put_sarray ()
and
.BR gd_put_sarray_slice ()
return zero.  On error, they return a negative-valued error code.  Possible
error codes are:
.TP 8
.B GD_E_ACCMODE
The specified
.I dirfile
was opened read-only.
.TP
.B GD_E_ALLOC
The library was unable to allocate memory.
.TP
.B GD_E_BAD_CODE
The field specified by
.I field_code
was not found in the database.
.TP
.B GD_E_BAD_DIRFILE
An invalid
.I dirfile
was supplied.
.TP
.B GD_E_BAD_FIELD_TYPE
The supplied
.I field_code
was not a
.B STRING
nor a
.BR SARRAY .
.TP
.B GD_E_BOUNDS
A request for data beyond the end of the field was made.
.TP
.B GD_E_INTERNAL_ERROR
An internal error occurred in the library while trying to perform the task.
This indicates a bug in the library.  Please report the incident to the
maintainer.
.TP
.B GD_E_PROTECTED
The fragment containing the constant was protected from change.
.PP
The error code is also stored in the
.B DIRFILE
object and may be retrieved after this function returns by calling
.BR gd_error (3).
A descriptive error string for the error may be obtained by calling
.BR gd_error_string (3).
.SH SEE ALSO
.BR dirfile (5),
.BR gd_array_len (3),
.BR gd_sarrays (3),
.BR gd_error (3),
.BR gd_error_string (3),
.BR gd_get_sarray_slice (3),
.BR gd_open (3),
.BR gd_put_string (3)
